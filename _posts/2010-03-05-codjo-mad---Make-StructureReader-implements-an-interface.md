---
layout: post
title: agf-mad - Make StructureReader implements an interface
tags: [framework-1-137,codjo-mad]
---
<u>Context</u>:
Damas user wants to use the requetor. The object ```StructureReader``` is necessary to build the requetor gui.
This object contains loading feature (from the file 'structure.xml' generated by datagen) and the methods
```
    public Map<String, DefaultTableStructure> getAllTableStructure();
    public Map<String, TableStructure> getQuarantineTables();
    public TableStructure getTableByJavaName(String javaName);
    public TableStructure getTableBySqlName(String sqlTableName);
    public boolean containsTableByJavaName(String javaName);
    public boolean containsTableBySqlName(String sqlTableName);
```

But, no datagen is defined in DAMAS.

<u>Description</u>:
The class StructureReader now implements the interface ```IStructureReader```. This interface contains method describe above.

<u>Example</u>:
```
class DamasRequetorStructureReader implements IStructureReader {
    private DamasModelManager damasManager;


    DamasRequetorStructureReader(DamasModelManager damasManager)
          throws IOException, ParserConfigurationException, SAXException {
        this.damasManager = damasManager;
    }


    public TableStructure getTableBySqlName(String sqlTableName) {
        final Table damasTable;
        try {
            damasTable = damasManager.getDamasModel().getTableConfiguration(sqlTableName);
            DefaultTableStructure tableStructure = new DefaultTableStructure(damasTable.getLabel(),
                                                                             sqlTableName,
                                                                             sqlTableName,
                                                                             "");
            for (TableField damasTablefield : damasTable.getFields()) {
                final String name = damasTablefield.getName();
                tableStructure.addField(new DefaultFieldStructure(damasTablefield.getLabel(),
                                                                  name,
                                                                  name,
                                                                  null,
                                                                  damasTablefield.getSqlType()));
            }
            return tableStructure;
        }
        catch (RequestException e) {
            throw new RuntimeException(e);
        }
    }

    public Map<String, DefaultTableStructure> getAllTableStructure() {
        return null; // Todo
    }

    public Map<String, TableStructure> getQuarantineTables() {
        return null; // Todo
    }

    public TableStructure getTableByJavaName(String javaName) {
        return null; // Todo
    }

    public boolean containsTableByJavaName(String javaName) {
        return false;  // Todo
    }

    public boolean containsTableBySqlName(String sqlTableName) {
        return false;  // Todo
    }
}
```



