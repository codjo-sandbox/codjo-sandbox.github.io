---
layout: post
title: agf-mad - Make LinkFamilyReader implements an interface
tags: [framework-1-137,codjo-mad]
---
<u>Context:</u>
Damas users want to use the requetor. The object ```LinkFamilyReader``` is necessary to build the ```requetor gui```. 
This object contains loading feature (from the file 'requetorDef.xml' generated by datagen) and the method 
```
public LinkFamily getFamily(String id);
```

But, no datagen is defined in DAMAS.

<u>Description:</u>
* The class LinkFamilyReader becomes ```DefaultLinkFamilyReader``` and ```LinkFamilyReader``` is now an interface which only contains the method ```getFamily(String)```.

* We change the visibility of the constructor of classes ```LinkFamily```, ```Key``` and ```Link``` in order to construct those objects in the implementation of test classes.

<u>Example:</u>
```
public class DamasLinkFamilyReader implements LinkFamilyReader {
    private DamasModelManager damasModelManager;
    private DamasRequetorStructureReader requetorStructureReader;


    public DamasLinkFamilyReader(DamasModelManager damasModelManager,
                                 DamasRequetorStructureReader requetorStructureReader) {
        this.damasModelManager = damasModelManager;
        this.requetorStructureReader = requetorStructureReader;
    }


    public LinkFamily getFamily(String id) {
        try{
           Table table = damasModelManager.getDamasModel().getTableConfiguration(id);
           return table.getDamasRequetor().getDamasLinkFamilyReader();
        }
        catch (RequestException e) {
            throw new RuntimeException(e);
        }
    }
}
```